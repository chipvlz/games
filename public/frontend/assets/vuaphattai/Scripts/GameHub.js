(function(scope,$){var gamehub=function(hub){hub.server={};hub.client={};$.extend(hub.server,{PlayTry:function(moneyType,roomId){return hub.invoke.apply(hub,$.merge(["PlayTry"],$.makeArray(arguments)));},PlayNow:function(moneyType,roomId){return hub.invoke.apply(hub,$.merge(["PlayNow"],$.makeArray(arguments)));},Spin:function(lines){return hub.invoke.apply(hub,$.merge(["Spin"],$.makeArray(arguments)));},SetAutoSpin:function(AutoSpin,lines){return hub.invoke.apply(hub,$.merge(["SetAutoSpin"],$.makeArray(arguments)));},TryReconnectUser:function(moneyType,roomId){return hub.invoke.apply(hub,$.merge(["TryReconnectUser"],$.makeArray(arguments)));},pingPong:function(){return hub.invoke.apply(hub,$.merge(["PingPong"],$.makeArray(arguments)));},GetJackPot:function(roomId,playType){return hub.invoke.apply(hub,$.merge(["GetJackPot"],$.makeArray(arguments)));},SetBonusGameStep:function(roomId,playType){return hub.invoke.apply(hub,$.merge(["SetBonusGameStep"],$.makeArray(arguments)));},GetJackPotStarKingdom:function(roomId){return hub.invoke.apply(hub,$.merge(["GetJackPotStarKingdom"],$.makeArray(arguments)));},FinishBonusGame:function(){return hub.invoke.apply(hub,$.merge(["FinishBonusGame"],$.makeArray(arguments)));}});hub.on("FinishEvent",function(result){console.log("FinishEvent: "+JSON.stringify(result));});hub.on('joinGame',function(player){if(typeof vqsSlot!='undefined'&&typeof vqsSlot.joinGame=='function')
vqsSlot.joinGame(player);});hub.on("resultSpin",function(result){if(typeof vqsSlot!='undefined'&&typeof vqsSlot.resultSpin=='function')
vqsSlot.resultSpin(result);});hub.on("message",function(result,time){if(typeof vqsSlot!='undefined'&&typeof vqsSlot.messageSpin=='function')
vqsSlot.messageSpin(result,time);});hub.on("RenderInfo",function(accountId,accountName){if(typeof vqsSlot!='undefined'&&typeof vqsSlot.renderInfo=='function')
vqsSlot.renderInfo(accountId,accountName);});hub.on("updateSlotAccountInfo",function(result){console.log("updateSlotAccountInfo: ",JSON.stringify(result));});hub.on("UpdateClientJackpot",function(result){if(result&&typeof vqsSlot!='undefined'&&typeof vqsSlot.updateClientJackpot=='function')
vqsSlot.updateClientJackpot(result);});hub.on('resultBonusGame',function(result){console.log("resultBonusGame: ",JSON.stringify(result));});hub.on('UpdateJackPot',function(result){});hub.on('resultSpinBonus',function(result){if(typeof vqsSlot!='undefined'&&typeof vqsSlot.resultSpinBonus=='function')
vqsSlot.resultSpinBonus(result);});hub.on('resultSetSpinBonus',function(result){console.log("resultSpinBonus: ",JSON.stringify(result));});hub.on('PlayerWinJackpot',function(roomId,name,value){if(typeof vqsSlot!='undefined'&&typeof vqsSlot.playerWinJackpot=='function')
vqsSlot.playerWinJackpot(roomId,name,value);});};scope.GameHub=gamehub;})(window.vuongquocsao,$);(function(scope,$){var config=new scope.Config();var hubmanager=function(){this.init();};hubmanager.prototype.init=function(callback){this.connection=$.hubConnection(config.UrlHub);this.gameHub=this.connection.createHubProxy(config.HubName);this.hubGame=new scope.GameHub(this.gameHub);var that=this;this.connection.stateChanged(function(change){if(change.newState===$.signalR.connectionState.connecting){console.log('dang ket noi');}
else if(change.newState===$.signalR.connectionState.connected){console.log('ket noi thanh cong');}
else if(change.newState===$.signalR.connectionState.disconnected){console.log('mất kết nối máy chủ !@');that.connectHub();}});if(typeof callback!='undefined'&&typeof callback=='function')
callback();};hubmanager.prototype.connectHub=function(callback){var that=this;if(this.connection.state!=$.signalR.connectionState.connected){this.connection.start({transport:config.Transport,jsonp:false,waitForPageLoad:false}).done(function(){if(that.timePingPong)
clearInterval(that.timePingPong);that.timePingPong=setInterval(function(){that.gameHub.server.pingPong();},config.TimesPingPong);if(typeof callback!="undefined"&&typeof callback==="function")
callback();}).fail(function(e){console.log(e)
if(typeof callback!="undefined"&&typeof callback==="function")
callback(config.ErrorCallServer);});}};hubmanager.prototype.stopHubs=function(callback){var that=this;if(this.connection.state!=$.signalR.connectionState.disconnected){this.connection.stop().done(function(){if(that.timePingPong)
clearInterval(that.timePingPong);if(typeof callback!="undefined"&&typeof callback==="function")
callback();}).fail(function(){if(typeof callback!="undefined"&&typeof callback==="function")
callback(config.ErrorCallServer);});}};hubmanager.prototype.serverPlayTry=function(moneyType,roomId,callback){this.gameHub.server.PlayTry(moneyType,roomId).done(function(result){if(typeof callback!="undefined"&&typeof callback==="function")
callback(result);}).fail(function(){if(typeof callback!="undefined"&&typeof callback==="function")
callback(config.ErrorCallServer);});};hubmanager.prototype.serverPlayNow=function(moneyType,roomId,callback){this.gameHub.server.PlayNow(moneyType,roomId).done(function(result){if(typeof callback!="undefined"&&typeof callback==="function")
callback(result);}).fail(function(){if(typeof callback!="undefined"&&typeof callback==="function")
callback(config.ErrorCallServer);});};hubmanager.prototype.serverSpin=function(lines,callback){this.gameHub.server.Spin(lines).done(function(result){if(result==-10004){vqsSlot.messageSpin('Bạn không đủ tiền để quay tiếp',5);return;}
if(typeof callback!="undefined"&&typeof callback==="function")
callback(result);}).fail(function(){if(typeof callback!="undefined"&&typeof callback==="function")
callback(config.ErrorCallServer);});};hubmanager.prototype.serverSetAutoSpin=function(autoSpin,lines,callback){this.gameHub.server.SetAutoSpin(autoSpin,lines).done(function(result){if(typeof callback!="undefined"&&typeof callback==="function")
callback(result);}).fail(function(){if(typeof callback!="undefined"&&typeof callback==="function")
callback(config.ErrorCallServer);});};hubmanager.prototype.serverTryReconnectUser=function(moneyType,roomId,callback){this.gameHub.server.TryReconnectUser(moneyType,roomId).done(function(result){if(typeof callback!="undefined"&&typeof callback==="function")
callback(result);}).fail(function(){if(typeof callback!="undefined"&&typeof callback==="function")
callback(config.ErrorCallServer);});};hubmanager.prototype.serverGetJackPot=function(roomId,playType,callback){this.gameHub.server.GetJackPot(roomId,playType).done(function(result){if(typeof callback!="undefined"&&typeof callback==="function")
callback(result);}).fail(function(){if(typeof callback!="undefined"&&typeof callback==="function")
callback(config.ErrorCallServer);});};hubmanager.prototype.serverSetBonusGameStep=function(roomId,playType,callback){this.gameHub.server.SetBonusGameStep(roomId,playType).done(function(result){if(typeof callback!="undefined"&&typeof callback==="function")
callback(result);}).fail(function(){if(typeof callback!="undefined"&&typeof callback==="function")
callback(config.ErrorCallServer);});};hubmanager.prototype.serverFinishBonusGame=function(callback){this.gameHub.server.FinishBonusGame().done(function(result){if(typeof callback!="undefined"&&typeof callback==="function")
callback(result);}).fail(function(){if(typeof callback!="undefined"&&typeof callback==="function")
callback(config.ErrorCallServer);});};scope.HubManager=hubmanager;})(window.vuongquocsao,$)